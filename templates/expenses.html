{% extends 'master/base.html' %}
{% block 'title' %}
 Expenses
{% endblock %}


{% block 'css' %}



    <style>
            #myInput {
              font-size: 16px;
              padding: 12px 20px 12px 40px;
              border: 1px solid #ddd;
              margin-bottom: 12px;
            }
            #from_date {
              font-size: 16px;
              padding: 12px 20px 12px 40px;
              border: 1px solid #ddd;
              margin-bottom: 12px;
            }
            #to_date {
              font-size: 16px;
              padding: 12px 20px 12px 40px;
              border: 1px solid #ddd;
              margin-bottom: 12px;
            }
            .hiddenRow {
                padding: 0 4px !important;
                background-color: #eeeeee;
                font-size: 20px;
            }
            .accordian-body span{
                color:#a2a2a2 !important;
            }

    </style>

{% endblock %}



{% block 'content' %}
<div class="container pt-3">
    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'expenses_home' %}">Expenses</a></li>
      <li class="breadcrumb-item active" aria-current="page">Expenses Summary</li>
    </ol>
  </nav>
</div>

         

    <form method="POST">

    {% csrf_token %}
    <div class="container">
        <div class="row">
            
                <div class="col-lg-2 col-md-4 pt-3">
                    <input  type="text" class="form-control" name="from_date" id="from_date" placeholder="From Date" onfocus="(this.type='date')" onblur="(this.type='text')" required><br>
                </div>
    
                <div class="col-lg-2 col-md-4 pt-3">
                    <input  type="text" class="form-control" name="to_date" id="to_date" placeholder="To Date" onfocus="(this.type='date')" onblur="(this.type='text')" required><br>
                </div>
                
                <div class="col-lg-2 col-md-4 pt-4">
                     <button class="btn btn-primary btn-hover" type="submit" value="Show">Show</button>
                </div>
                <div class="col-lg-2 col-md-4 pt-3">
                    <input type="text" id="myInput" onkeyup="function()" placeholder=" Search Category,title,...">
                </div>
                
        </div>
    </div>
    
    
             
        </form>
        


<div class="container table-responsive pt-3">

    
    <table class="table table-hover table-bordered table-light"  style="border-collapse:collapse;">
        <thead>
        <th>Category</th>
            <th>Title</th>
            <th>Date</th>
            <th>Cost </th>
            <th>Action</th>
        </thead>

        <tbody id="expenses">
            {% for e in expenses %}
                        <tr colspan="6" data-toggle="collapse" data-target="#{{e.id}}" class="accordion-toggle">
                            <td>{{e.category}}</td>
                            <td>{{e.title}}</td>
                            <td>{{e.date}}</td>
                            <td>{{e.costs}}</td>
                            <td><a href="#" onclick="_edit('{% url 'exp_edit' e.id %}')">e</a>|<a href="#" onclick="_delete('{% url 'exp_delete' e.id %}')">d</a> </td>
                            

                        </tr>
                        <tr class="p">
                            <td colspan="6" class="hiddenRow">
                                <div class="accordian-body collapse p-3" id="{{e.id}}">
                                    <p>Date : <span>{{e.date}}</span> </p>
                                    <p>Day : <span>{{e.date|date:'l'}}</span> </p>
                                    <p>Category : <span>{{e.category}}</span> </p>
                                    <p>Name : <span>{{e.title}}</span> </p>
                                    <p>Cost : <span>{{e.costs}}</span></p>
                                    <p>Description : <span>{{e.description}}</span></p>
                                </div>
                            </td>
                        </tr>
            {% endfor %}

        </tbody>
    </table>
    {{expenses.from_date}}

</div>


    <script>
         function _delete(url){
         bootbox.confirm("Confirmation to delete?", function(result){
            if(result){
                window.location.href=url
                }
         });
        }
        function _edit(url){
         bootbox.confirm("Confirmation to edit?", function(result){
            if(result){
                window.location.href=url
                }
         });
        }
        // for date
        var x = new Date();        
        x.setMonth(x.getMonth()-1);
        document.getElementById("to_date").valueAsDate = new Date();
        document.getElementById("from_date").valueAsDate = x;

        $('.accordion-toggle').click(function(){
        $('.hiddenRow').hide();
        $(this).next('tr').find('.hiddenRow').show();
        });

    </script>

<script>
    // for search
        $(document).ready(function(){
        $("#myInput").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#expenses tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        });
</script>


{% endblock %}
