{% extends 'master/base.html' %}

{% load static %}

{% block 'title' %}
  Profile
{% endblock %}
{% block 'css' %}
    
{% endblock %}

{% block 'content' %}

<div class="container pt-5">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">ExpenseTracker</a></li>
      <li class="breadcrumb-item active" aria-current="page">Profile</li>
    </ol>
  </nav>
    <div class="jumbotron" style="background: rgba(133, 187, 101, 0.1); ">

                <div class="container">

                  <form method="POST">
                          {% csrf_token %}
                    <fieldset>

                     <legend>Profile:</legend>

                      {% csrf_token %}
                      {{ user_form.as_p }}
                      {{ profile_form.as_p }}

                      <button class="btn btn-success" type="submit">Update</button>
                      
                    </fieldset>
                  </form>
                      
                  <button class="mt-3 btn btn-success" onclick="profile_delete();">Delete Account</button>
                
                </div>

    </div>
 </div>


{% for message in messages %}
    <script>
      alert("{{message}}")
    </script>
    {% endfor %}

    <script>
      function profile_delete(){
        bootbox.confirm({
            message: "<h3>Deleting the account will delete all your stored data.</h3><h4>Income = {{income}} records <br> Category = {{category}} records <br> Expenses = {{expense}} records </h4><br> <h6>Want to delete your account?</h6>",
            buttons: {
            confirm: {
                label: 'Continue',
                className: 'btn-primary'
            },
            cancel: {
                label: "Don't Delete",
                className: 'btn-danger'
            }
        },
        callback: function (result) {
            if (result)
                window.location.href="{% url 'profile_delete' %}"
        }
        });
        }
        
      
    </script>

{% endblock %}

 



